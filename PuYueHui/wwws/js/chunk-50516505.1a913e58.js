(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-50516505"],{2909:function(t,a,e){"use strict";function r(t){if(Array.isArray(t)){for(var a=0,e=new Array(t.length);a<t.length;a++)e[a]=t[a];return e}}function n(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function o(t){return r(t)||n(t)||i()}e.d(a,"a",function(){return o})},a121:function(t,a,e){},debc:function(t,a,e){"use strict";var r=e("a121"),n=e.n(r);n.a},f895:function(t,a,e){"use strict";e.r(a);var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"flexlayout"},[e("div",{staticClass:"topbar"},[e("span",{staticClass:"icon icon-fanhui",on:{click:function(a){t.$router.go(-1)}}}),e("div",[t._v("我的订单")]),e("router-link",{staticClass:"icon icon-home",attrs:{to:"/"}})],1),e("div",{staticClass:"tabs"},[e("span",{class:{cur:1==t.payOrderState},on:{click:function(a){t.findPayOrdersByState(1,1,!0)}}},[t._v("待支付")]),e("span",{class:{cur:2==t.payOrderState},on:{click:function(a){t.findPayOrdersByState(2,1,!0)}}},[t._v("待发货")]),e("span",{class:{cur:50==t.payOrderState},on:{click:function(a){t.findPayOrdersByState(50,1,!0)}}},[t._v("已发货")]),e("span",{class:{cur:60==t.payOrderState},on:{click:function(a){t.findPayOrdersByState(60,2,!0)}}},[t._v("门店自提")]),e("span",{class:{cur:100==t.payOrderState},on:{click:function(a){t.getAllPayOrders(100,!0)}}},[t._v("全部")])]),e("div",{staticClass:"flexauto"},[e("v-loadmore",{ref:"loadmore",attrs:{"bottom-method":t.loadBottom,"bottom-all-loaded":t.allLoaded,"auto-fill":!1}},[e("div",{staticClass:"dingdan"},[0===t.orders.length?e("div",{staticClass:"nosouce"},[e("h2",{staticClass:"icon-kong"},[t._v("您还没有创建订单")]),e("p",[t._v("快选择自己心仪的商品加入购物车购买吧")]),e("p",[e("router-link",{staticClass:"icon-gouwuche border-right",attrs:{to:{path:"/Shoppingcart",query:{tab:3}}}},[t._v("查看购物车")])],1)]):t._l(t.orders,function(a){return e("ul",{key:a.id,staticClass:"dingdanlist"},[e("li",{staticClass:"dingdanlistTitle"},[e("span",[t._v(t._s(t._f("formatDateTime")(a.payDate?a.payDate:a.createDate)))]),e("router-link",{attrs:{to:{path:"/DingdanShow",query:{id:a.id}}}},[t._v("查看详情")])],1),t._l(a.payOrderDetails,function(r){return r.object?e("li",{key:r.id,staticClass:"border-top"},[e("div",{staticClass:"wrap_img"},[e("router-link",{staticClass:"link",attrs:{to:"/ProductDetail?id="+r.objectId}},[e("img",{attrs:{src:t.attachmentUrl+r.object.logo+".jpg",alt:r.object.name}})]),t.getType(r)?e("span",{staticClass:"zhuanshu"},[t._v("专属商城")]):t._e()],1),e("div",[e("router-link",{attrs:{to:{path:"/DingdanShow",query:{id:a.id}}}},[e("h2",{staticClass:"productTitle"},[t._v(t._s(r.object.name))]),e("p",{staticClass:"price"},[t._v(t._s(t._f("formatMoney")(r.price)))]),e("p",[t._v("\n                  规格："+t._s(r.object.year)+"年 "+t._s(r.object.capacity)+"\n                  "),e("span",{staticStyle:{float:"right"}},[t._v("数量: "+t._s(r.quantity))])])])],1)]):t._e()}),e("li",{staticClass:"border-top tool"},[e("span",[t._v("\n              共\n              "),e("em",{staticClass:"price"},[t._v(t._s(a.payOrderDetails.length))]),t._v(" 件商品\n              "),e("em",{staticClass:"price"},[t._v(t._s(t._f("formatMoney")(t.totalAmount(a.payOrderDetails))))])]),e("div",[e("span",{staticClass:"del",on:{click:function(e){t.deleteOrderInfo(a.id)}}},[t._v("删除订单")]),1==a.payOrderState&&"wxpay"==a.channel?e("span",[(new Date).getTime()-a.createDate<=3e5?e("button",{staticClass:"pay",on:{click:function(e){t.pay(a.id,a.channel)}}},[t._v("微信支付")]):e("span",{staticClass:"pay"},[t._v("已失效")])]):t._e(),1==a.payOrderState&&"alipay"==a.channel?e("span",[(new Date).getTime()-a.createDate<=1296e6?e("button",{staticClass:"pay",on:{click:function(e){t.pay(a.id,a.channel)}}},[t._v("支付宝支付")]):e("span",{staticClass:"pay"},[t._v("已失效")])]):t._e()])])],2)})],2)])],1)])},n=[];function i(t,a,e){return a in t?Object.defineProperty(t,a,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[a]=e,t}var o,s=e("2909"),c=e("3a78"),l=e("76a0"),d=(o={name:"Dingdan",components:{MessageBox:l["MessageBox"]},data:function(){return{page:{pageNo:1,pageSize:10},attachmentUrl:this.GLOBAL.attachmentUrl,payOrderState:this.$route.query.payOrderState?this.$route.query.payOrderState:"0"==this.$route.query.payOrderState?60:1,all:!1,orders:[],allLoaded:!1,scrollMode:"auto"}}},i(o,"components",{"v-loadmore":l["Loadmore"]}),i(o,"mounted",function(){100==this.payOrderState?this.getAllPayOrders(this.payOrderState,!0):this.findPayOrdersByState(this.payOrderState,1,!0)}),i(o,"methods",{loadTop:function(){this.findPayOrdersByState(this.payOrderState,1,!1),this.$refs.loadmore.onTopLoaded()},loadBottom:function(){this.more(),this.$refs.loadmore.onBottomLoaded()},more:function(){this.all?this.getAllPayOrders(100,!1):this.findPayOrdersByState(this.payOrderState,1,!1)},isHaveMore:function(t){this.allLoaded=!0,t&&(this.allLoaded=!1)},findPayOrdersByState:function(t,a,e){var r=this,n=this;this.all=!1,e&&(this.page.pageNo=0,this.orders=[]),this.payOrderState=t||1;var i="1",o=this.payOrderState;1==t?i="":60==t&&(o=0,i="2"),2==a&&(o=0),n.page.pageNo+=1;var l={"page.pageNo":n.page.pageNo,"page.pageSize":n.page.pageSize,payOrderState:o,receiveType:i};c["a"].findPayOrdersByState(l,function(a){r.payOrderState==t&&(n.isHaveMore(a.hasNextPage),n.orders=Object(s["a"])(n.orders).concat(Object(s["a"])(a.list)),n.$nextTick(function(){}))},function(t){console.error("查询订单列表发生异常:",JSON.stringify(t))})},getAllPayOrders:function(t,a){var e=this;this.all=!0,a&&(this.page.pageNo=0,this.orders=[]),this.payOrderState=t||1,e.page.pageNo+=1;var r={"page.pageNo":e.page.pageNo,"page.pageSize":e.page.pageSize};c["a"].findPayOrdersByState(r,function(t){e.isHaveMore(t.hasNextPage),e.orders=Object(s["a"])(e.orders).concat(Object(s["a"])(t.list))},function(t){console.error("查询全部订单列表发生异常:",JSON.stringify(t))})},deleteOrderInfo:function(t){var a=this;l["MessageBox"].confirm("您确定删除此订单吗?删除后将不可恢复.","提示").then(function(e,r){"confirm"===e&&c["a"].deleteOrderInfo(t,function(t){console.info("订单删除成功"),a.findPayOrdersByState(a.payOrderState,1,!0)},function(t){console.error("删除订单发生异常:",JSON.stringify(t))})}).catch(function(t){})},pay:function(t,a){"alipay"===a?c["a"].alipay(t):"wxpay"===a&&c["a"].wxpay(t,function(t){t&&(window.location.href=t)},function(t){console.error("发起微信支付发生异常"+JSON.stringify(t))})},tihuoma:function(){Object(l["MessageBox"])("3029928","请提货时将此号码展示给提货门店")}}),i(o,"computed",{totalAmount:function(){return function(t){for(var a=0,e=0;e<t.length;e++)a+=parseFloat(t[e].amount);return a}},getType:function(){return function(t){return!!t.extend&&"2"==JSON.parse(t.extend).type}}}),o),p=d,u=(e("debc"),e("2877")),y=Object(u["a"])(p,r,n,!1,null,"2a1bd366",null);y.options.__file="Dingdan.vue";a["default"]=y.exports}}]);