(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2220e84e"],{"0425":function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"flexlayout"},[i("div",{staticClass:"topbar"},[i("span",{staticClass:"icon icon-fanhui",on:{click:function(t){e.$router.go(-1)}}}),i("div",[e._v("订单详情")]),i("router-link",{staticClass:"icon icon-home",attrs:{to:"/"}})],1),e.order?i("div",{staticClass:"dingdan"},[i("ul",{staticClass:"dingdanlist dingdanMessage"},[i("li",{staticClass:"border-bottom dingdanzhuangtai"},[i("strong",[e._v("订单信息")]),50==e.order.payOrderState?i("div",{staticStyle:{"text-align":"right"}},[i("span",{staticClass:"tipR"},[e._v("待收货")])]):e._e(),70==e.order.payOrderState?i("div",{staticStyle:{"text-align":"right"}},[i("span",{staticClass:"tipG"},[e._v("已收货")])]):e._e()]),i("li",[i("em",[e._v("订单编号：")]),i("span",[e._v(e._s(e.order.orderNo))])]),i("li",[i("em",[e._v("创建时间：")]),i("span",[e._v(e._s(e._f("formatDateTime")(e.order.createDate)))])]),i("li",[i("em",[e._v("订单状态：")]),i("span",[e._v(e._s(e.renderState(e.order.payOrderState)))])]),e.order.payOrderState>1?i("li",[i("em",[e._v("支付渠道：")]),i("span",[e._v(e._s("alipay"==e.order.channel?"支付宝":"wxpay"==e.order.channel?"微信":"余额"))])]):e._e(),e.order.payOrderState>1&&e.order.payDate?i("li",[i("em",[e._v("支付时间：")]),i("span",[e._v(e._s(e._f("formatDateTime")(e.order.payDate)))])]):e._e(),1==e.order.receiveType&&e.waybill?i("li",[i("em",[e._v("物流公司：")]),i("span",[e._v(e._s(e.waybill.expressInfoName))])]):e._e(),1==e.order.receiveType&&e.waybill?i("li",[i("em",[e._v("快递单号：")]),i("span",[e._v(e._s(e.waybill.expressNo))])]):e._e(),1==e.order.receiveType?i("li",[i("em",[e._v("收货人：")]),i("span",[e._v(e._s(JSON.parse(e.order.receiveInfo).receiver))])]):e._e(),1==e.order.receiveType?i("li",[i("em",[e._v("收货地址：")]),i("span",[e._v(e._s(JSON.parse(e.order.receiveInfo).fullAddress))])]):e._e(),2==e.order.receiveType?i("li",[i("em",[e._v("自提门店：")]),i("span",[e._v(e._s(JSON.parse(e.order.receiveInfo).storeName))])]):e._e(),2==e.order.receiveType?i("li",[i("em",[e._v("门店地址：")]),i("span",[e._v(e._s(JSON.parse(e.order.receiveInfo).address))])]):e._e(),2==e.order.receiveType?i("li",[i("em",[e._v("提货码：")]),i("span",[e.order.payOrderState>1?i("strong",{on:{click:function(t){e.showPickCode()}}},[e._v(e._s(JSON.parse(e.order.extra).pickCode))]):e._e()])]):e._e(),2==e.order.receiveType?i("li",{staticClass:"editTime",on:{click:function(t){e.popupTime=!0}}},[i("em",[e._v("提货时间：")]),i("span",[e._v(e._s(JSON.parse(e.order.receiveInfo).pickDate?JSON.parse(JSON.parse(e.order.receiveInfo).pickDate).show:"")+" "+e._s(JSON.parse(e.order.receiveInfo).pickTime))])]):e._e(),i("li",[i("em",[e._v("备注")]),i("span",[e._v(e._s(e.order.remark))])]),70==e.order.payOrderState?i("li",[i("em",[e._v("收货时间：")]),i("span",[e._v(e._s(e._f("formatDateTime")(e.order.updateDate)))])]):e._e(),70==e.order.payOrderState?i("li",[i("em",[e._v("意见建议：")]),i("p",[e._v(e._s(e.order.comment))])]):e._e()]),e.order.invoice?i("ul",{staticClass:"dingdanlist dingdanMessage"},[e._m(0),i("li",[i("em",[e._v("发票类型")]),i("span",[e._v(e._s("1"==e.invoice.mode?"电子发票":"纸质发票"))])]),"1"==e.invoice.mode?i("li",[i("em",[e._v("邮箱")]),i("span",[e._v(e._s(e.invoice.email))])]):e._e(),i("li",[i("em",[e._v("抬头类型")]),i("span",[e._v(e._s("1"==e.invoice.type?"个人":"企业"))])]),i("li",[i("em",[e._v("发票抬头")]),i("span",[e._v(e._s(e.invoice.name))])]),"2"==e.invoice.type?i("li",[i("em",[e._v("税号")]),i("span",[e._v(e._s(e.invoice.taxNo))])]):e._e(),"2"==e.invoice.type?i("li",[i("em",[e._v("地址")]),i("span",[e._v(e._s(e.invoice.address))])]):e._e(),"2"==e.invoice.type?i("li",[i("em",[e._v("固定电话")]),i("span",[e._v(e._s(e.invoice.mobile))])]):e._e(),"2"==e.invoice.type?i("li",[i("em",[e._v("开户行")]),i("span",[e._v(e._s(e.invoice.bank))])]):e._e(),"2"==e.invoice.type?i("li",[i("em",[e._v("开户行账号")]),i("span",[e._v(e._s(e.invoice.bankNo))])]):e._e()]):i("ul",{staticClass:"dingdanlist dingdanMessage"},[e._m(1)]),i("ul",{staticClass:"dingdanlist"},[e._m(2),e._l(e.order.payOrderDetails,function(t){return i("li",{key:t.id,staticClass:"border-top"},[i("router-link",{staticClass:"link",attrs:{to:"/ProductDetail?id="+t.objectId}},[i("div",{staticClass:"wrap_img"},[i("img",{attrs:{src:e.attachmentUrl+t.object.logo+".jpg",alt:t.object.name}}),e.getType(t)?i("span",{staticClass:"zhuanshu"},[e._v("专属商城")]):e._e()]),i("div",[i("h2",{staticClass:"productTitle"},[e._v(e._s(t.object.name))]),i("p",{staticClass:"price"},[e._v(e._s(e._f("formatMoney")(t.price)))]),i("p",[e._v("\n              规格："+e._s(t.object.year)+"年 "+e._s(t.object.capacity)+"\n              "),i("span",{staticStyle:{float:"right"}},[e._v("数量: "+e._s(t.quantity))])])])])],1)}),i("li",{staticClass:"border-top",staticStyle:{"padding-top":"0.3rem"}},[i("div",{staticClass:"graytext"},[e._v("\n          共\n          "),i("em",{staticClass:"price"},[e._v(e._s(e.order.payOrderDetails.length))]),e._v(" 件商品\n        ")]),i("div",[e._v(e._s(e._f("formatMoney")(e.totalAmount(e.order.payOrderDetails))))])]),i("li",[i("div",{staticClass:"graytext"},[e._v("快递费")]),i("div",[e._v(e._s(e._f("formatMoney")(e.order.serviceCharge)))])]),e.order.coupon1?i("li",[i("div",{staticClass:"graytext"},[e._v("无门槛优惠券")]),i("div",[e._v("- "+e._s(e._f("formatMoney")(e.order.coupon1.minusMoney)))])]):e._e(),e.order.coupon2?i("li",[i("div",{staticClass:"graytext"},[e._v("满减优惠券")]),i("div",[e._v("-"+e._s(e._f("formatMoney")(e.order.coupon2.minusMoney)))])]):e._e(),i("li",{staticStyle:{"padding-bottom":"0.3rem"}},[i("div",{staticClass:"graytext"},[e._v("合计")]),i("div",[i("em",{staticClass:"price"},[e._v(e._s(e._f("formatMoney")(e.order.amount)))])])]),i("li",{staticClass:"border-top"},[2==e.order.payOrderState&&"2"==e.order.receiveType?i("div",{staticClass:"tac",staticStyle:{width:"50%"},on:{click:function(t){e.changeStore(e.order.id)}}},[e._v("更换提货门店")]):e._e(),i("div",{staticClass:"tac",staticStyle:{width:"50%",color:"#f5551f"},on:{click:function(t){e.deleteOrderInfo(e.order.id)}}},[e._v("删除订单")])])],2)]):e._e(),e.order&&1==e.order.receiveType&&50==e.order.payOrderState&&e.waybill?i("div",{staticClass:"bigBtn",on:{click:function(t){e.popupVisible=!0}}},[e._v("确认收货")]):e._e(),i("mt-popup",{staticClass:"shouhuo",attrs:{position:"bottom"},model:{value:e.popupVisible,callback:function(t){e.popupVisible=t},expression:"popupVisible"}},[i("h2",[e._v("您对收到的宝贝满意吗？请留言告诉我们您的想法。")]),e.order?i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.order.comment,expression:"order.comment"}],attrs:{cols:"30",rows:"10"},domProps:{value:e.order.comment},on:{input:function(t){t.target.composing||e.$set(e.order,"comment",t.target.value)}}}):e._e(),i("div",{staticClass:"bigBtn",on:{click:function(t){e.acceptOrder(e.waybill.id,e.order.id)}}},[e._v("确认收货")])]),i("mt-popup",{staticClass:"popupTime",attrs:{position:"bottom"},model:{value:e.popupTime,callback:function(t){e.popupTime=t},expression:"popupTime"}},[i("Timeselect")],1)],1)},o=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("li",{staticClass:"border-bottom dingdanzhuangtai"},[i("strong",[e._v("发票信息")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("li",[i("span",[e._v("本次不开具发票")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("li",[i("strong",[e._v("商品信息")])])}],a=i("3a78"),s=i("76a0"),n=i("0c34"),c={name:"DingdanShow",components:{Timeselect:n["a"]},data:function(){return{popupTime:!1,popupVisible:!1,attachmentUrl:this.GLOBAL.attachmentUrl,orderId:this.$route.query.id,order:null,waybill:null,invoice:{}}},created:function(){this.getPayOrderDetail()},methods:{getPayOrderDetail:function(){var e=this;a["a"].getPayOrderDetail(e.orderId,function(t){e.order=t,t.invoice&&(e.invoice=JSON.parse(t.invoice)),e.getWaybillInfo()},function(e){console.error("获取订单详细信息发生异常",JSON.stringify(e))})},getWaybillInfo:function(){var e=this;50!=e.order.payOrderState&&70!=e.order.payOrderState||a["a"].getWaybillInfo(e.order.extend,function(t){e.waybill=t},function(e){console.error("获取快递详细信息发生异常",JSON.stringify(e))})},deleteOrderInfo:function(e){var t=this;s["MessageBox"].confirm("您确定删除此订单吗?删除后将不可恢复.","提示").then(function(i,r){"confirm"===i&&a["a"].deleteOrderInfo(e,function(e){console.info("订单删除成功"),t.$router.go(-1)},function(e){console.error("删除订单发生异常:",JSON.stringify(e))})}).catch(function(e){})},changeStore:function(e){this.$router.push({name:"ChangeStore",query:{orderId:e}})},acceptOrder:function(e,t){var i=this;i.popupVisible=!1,a["a"].acceptOrder({id:e,orderInfoId:t,comments:i.order.comment},function(e){i.$router.go(-1)},function(e){console.error("订单确认收货发生异常:",JSON.stringify(e))})},showPickCode:function(){Object(s["MessageBox"])("提货码","请提货时将此提货码展示给提货门店")}},computed:{totalAmount:function(){return function(e){for(var t=0,i=0;i<e.length;i++)t+=parseFloat(e[i].amount);return t}},getType:function(){return function(e){return!!e.extend&&"2"==JSON.parse(e.extend).type}},renderState:function(){return function(e){var t="未知";return 1==e?t="待支付":2==e?t="已支付":50==e?t="已发货":60==e?t="已门店自提":70==e?t="已收货":80==e?t="取消支付":81==e?t="已退货":90==e?t="交易关闭":100==e?t="待退款":102==e&&(t="已退款"),t}}}},l=c,d=(i("ef9a"),i("2877")),p=Object(d["a"])(l,r,o,!1,null,"de8d79a0",null);p.options.__file="DingdanShow.vue";t["default"]=p.exports},"04bb":function(e,t,i){"use strict";var r=i("731e"),o=i.n(r);o.a},"0c34":function(e,t,i){"use strict";var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"timeSelect"},[i("h2",[e._v("请选择提货日期")]),i("ul",{staticClass:"datelist"},e._l(e.dates,function(t,r){return i("li",{key:t.index,class:{cur:e.chooseDate.month==t.month&&e.chooseDate.date==t.date},on:{click:function(t){e.chooseDateClick(r)}}},[i("strong",[e._v(e._s(t.date))]),i("span",[e._v(e._s(t.year)+" "+e._s(t.month)+"月")]),i("span",{class:{sat:6==t.day,sun:0==t.day}},[e._v(e._s(t.week))])])})),i("h2",[e._v("请选择提货时间")]),i("ul",{staticClass:"timelist"},e._l(e.times,function(t,r){return i("li",{key:t,class:{cur:e.chooseTime==t},on:{click:function(t){e.chooseTimeClick(r)}}},[e._v(e._s(t))])}))])},o=[],a=i("5f87"),s=i("ca00"),n={name:"Timeselect",props:["popupTime"],data:function(){return{dates:[],times:["10:00~12:00","12:00~14:00","14:00~16:00","16:00~18:00","18:00~20:00"],chooseDate:{},chooseTime:"10:00~12:00"}},created:function(){this.initDates()},mounted:function(){},methods:{initDates:function(){this.dates=new Array(10);for(var e=new Date,t=0;t<10;t++){var i=new Date(e.getTime()+864e5*t),r=i.getFullYear(),o=i.getMonth()+1,a=i.getDate(),n=i.getDay(),c="星期"+"日一二三四五六".charAt(i.getDay()),l=s["a"].formatDate(i.getTime()),d={index:t,year:r,month:o,date:a,day:n,week:c,show:l};this.dates[t]=d,0==t&&(this.chooseDate=d)}},chooseDateClick:function(e){this.chooseDate=this.dates[e],Object(a["i"])("order_pickDate",JSON.stringify(this.chooseDate)),Object(a["i"])("order_pickTime",this.chooseTime),this.$emit("update:popupTime")},chooseTimeClick:function(e){this.chooseTime=this.times[e],Object(a["i"])("order_pickDate",JSON.stringify(this.chooseDate)),Object(a["i"])("order_pickTime",this.chooseTime),this.$emit("update:popupTime")}}},c=n,l=(i("04bb"),i("2877")),d=Object(l["a"])(c,r,o,!1,null,"37206cac",null);d.options.__file="Timeselect.vue";t["a"]=d.exports},4694:function(e,t,i){},"731e":function(e,t,i){},ef9a:function(e,t,i){"use strict";var r=i("4694"),o=i.n(r);o.a}}]);