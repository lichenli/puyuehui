(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b1cd8fdc"],{2683:function(n,e,a){},5040:function(n,e,a){"use strict";var t=a("2683"),i=a.n(t);i.a},ce41:function(n,e,a){"use strict";a.r(e);var t=function(){var n=this,e=n.$createElement,a=n._self._c||e;return a("div",[a("div",{staticClass:"topbar"},[a("span",{staticClass:"icon icon-fanhui",on:{click:function(e){n.$router.go(-1)}}}),a("div",[n._v("充值")]),a("router-link",{staticClass:"icon icon-home",attrs:{to:"/"}})],1),a("div",[a("dl",{staticClass:"payment"},[a("dt",[n._v("选择充值方式")]),n.isMicroMessengerMobile?a("dd",{staticClass:"icon-weixin icon-weixin-jsapi",class:{cur:"jsApiWxpay"===n.channel},on:{click:function(e){n.channel="jsApiWxpay"}}},[n._v("微信充值")]):a("dd",{staticClass:"icon-weixin",class:{cur:"wxpay"===n.channel},on:{click:function(e){n.channel="wxpay"}}},[n._v("微信充值")]),n.isMicroMessengerMobile?n._e():a("dd",{staticClass:"icon-zhifubao",class:{cur:"alipay"===n.channel},on:{click:function(e){n.channel="alipay"}}},[n._v("支付宝充值")])]),a("dl",{staticClass:"payment"},[a("dt",[n._v("充值金额")]),a("dd",{staticClass:"input_money"},[a("span",[n._v("￥")]),a("input",{directives:[{name:"model",rawName:"v-model",value:n.amount,expression:"amount"}],attrs:{placeholder:"请输入充值金额"},domProps:{value:n.amount},on:{input:function(e){e.target.composing||(n.amount=e.target.value)}}})])]),a("div",{staticClass:"bigBtn",on:{click:n.recharge}},[n._v("充值")])])])},i=[],o=a("3a78"),c=a("5f87"),s=a("76a0"),r={name:"Chongzhi",data:function(){var n=this.$util._isMicroMessengerMobile();return{isMicroMessengerMobile:n,channel:n?"jsApiWxpay":"wxpay",amount:100}},methods:{createRechargeInfo:function(){var n=this,e={channel:"jsApiWxpay"==this.channel?"wxpay":this.channel,amount:this.amount};o["a"].createRecharge(e,function(e){e?"alipay"===n.channel?(o["a"].alipayRecharge(e),n.gotoMoney()):"jsApiWxpay"===n.channel?(n.wxjsapipay(e),n.gotoMoney()):"wxpay"===n.channel&&(o["a"].wxpayRecharge(e,function(n){n&&(window.location.href=n)},function(n){console.error("发起微信充值发生异常"+JSON.stringify(n))}),n.gotoMoney()):Object(s["Toast"])("充值记录创建失败")},function(n){console.error("添加充值记录异常"+JSON.stringify(n))})},recharge:function(){var n=this;n.createRechargeInfo()},wxjsapipay:function(n){var e={},a=function(){WeixinJSBridge.invoke("getBrandWCPayRequest",{debug:!0,appId:e.appId,timeStamp:e.timeStamp,nonceStr:e.nonceStr,package:e.package,signType:e.signType,paySign:e.paySign,jsApiList:["chooseWXPay"]},function(n){"get_brand_wcpay_request:ok"==n.err_msg&&(Object(s["Toast"])("充值成功"),this_.gotoMoney()),"get_brand_wcpay_request:cancel"==n.err_msg&&(Object(s["Toast"])("取消充值"),this_.gotoMoney())})},t=function(){"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",a,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",a),document.attachEvent("onWeixinJSBridgeReady",a)):a()},i=Object(c["c"])();i?o["a"].jsApiWxpayRecharge(n,{openId:i},function(n){n?(e=n,t()):Object(s["Toast"])("微信充值下单失败")},function(n){console.error("获取微信充值信息时发生异常",JSON.stringify(n))}):Object(s["Toast"])("请通过微信公众号菜单进入帐户余额充值")},gotoMoney:function(){var n=this;n.$router.push({name:"Money"})}}},u=r,p=(a("5040"),a("2877")),l=Object(p["a"])(u,t,i,!1,null,"4d3a9d6d",null);l.options.__file="Chongzhi.vue";e["default"]=l.exports}}]);