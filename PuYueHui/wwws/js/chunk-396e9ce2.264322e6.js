(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-396e9ce2"],{"202b":function(t,i,a){},"268a":function(t,i,a){"use strict";var e=a("202b"),n=a.n(e);n.a},"7f7f":function(t,i,a){var e=a("86cc").f,n=Function.prototype,s=/^\s*function ([^ (]*)/,o="name";o in n||a("9e1e")&&e(n,o,{configurable:!0,get:function(){try{return(""+this).match(s)[1]}catch(t){return""}}})},"95d1":function(t,i,a){"use strict";a.r(i);var e=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",[a("div",{staticClass:"flexlayout"},[a("div",{staticClass:"topbar"},[a("span",{staticClass:"icon icon-fanhui",on:{click:function(i){t.$router.go(-1)}}}),a("div",[t._v("商品详情")]),t.shareLink?a("a",{staticClass:"icon icon-share",on:{click:function(i){t.shareVisiible=!0}}}):a("span",{staticClass:"icon icon-erweima",on:{click:function(i){t.showQrCode()}}},[t._v("分享码")])]),a("div",{staticClass:"flexauto",attrs:{id:"myWindow"}},[a("mt-swipe",{staticClass:"product_lunbo",attrs:{auto:6e3}},t._l(t.productAttList,function(i){return a("mt-swipe-item",{key:i.id},[a("img",{attrs:{src:t.attachmentUrl+i.attId+".jpg",alt:""}})])})),a("div",{staticClass:"productInfo"},[a("span",{staticClass:"price"},[a("p",[t._v("\n            "+t._s(t._f("formatMoney")(t.price))+"\n            "),a("span",{staticClass:"tag"},[t._v("会员价")])]),a("em",[t._v("零售价："+t._s(t._f("formatMoney")(t.originalPrice)))])]),a("div",{staticClass:"sold"},[a("p",[t._v("已售 "+t._s(t.soldNum))]),a("p",[t._v("库存 "+t._s(t.num))])])]),a("div",{staticClass:"productPanel"},[a("h2",{staticClass:"productName"},[t._v(t._s(t.name))]),a("h3",{staticClass:"productName_en"},[t._v("Argum vino de la Tierra de Castilla")]),a("p",{staticClass:"grayText"},[t._v("西班牙王室葡萄酒供应酒庄"+t._s(t.comment))])]),a("div",{staticClass:"productEditor",domProps:{innerHTML:t._s(t.detail)}})],1),a("div",{staticClass:"goumai border-top"},[a("router-link",{staticClass:"icon-gouwuche border-right",attrs:{to:{path:"/Shoppingcart",query:{tab:3}}}},[t._v("\n        购物车\n        "),a("em",{staticClass:"badge"},[t._v(t._s(t.shoppingCartCountInfo))])]),a("span",{staticClass:"icon-star",class:{selected:t.collectSelectedStyle,"":!t.collectSelectedStyle},on:{click:function(i){t.onStore(t.id)}}},[t._v("收藏")]),a("span",{staticClass:"btn2",on:{click:function(i){t.onShow()}}},[t._v("加入购物车")])],1)]),a("mt-popup",{staticClass:"querenkuang",staticStyle:{width:"100%"},attrs:{position:"bottom","popup-transition":"popup-fade"},model:{value:t.popupVisible,callback:function(i){t.popupVisible=i},expression:"popupVisible"}},[a("div",{staticClass:"querenInfo"},[t.smallImage?a("img",{attrs:{src:t.attachmentUrl+t.smallImage+".jpg",alt:""}}):t._e(),a("div",[a("p",{staticClass:"price"},[t._v(t._s(t._f("formatMoney")(t.price)))]),a("p",[t._v("库存: "+t._s(t.num))])])]),a("ul",{staticClass:"guige border-top"},[a("li",[a("em",[t._v("规格：")]),a("span",{staticClass:"border cur"},[t._v(t._s(t.capacity))])]),a("li",[a("em",[t._v("年份：")]),a("span",{staticClass:"border disable"},[t._v(t._s(t.year)+"年")])])]),a("div",{staticClass:"border-top",staticStyle:{overflow:"hidden",padding:".2rem"}},[a("span",{staticClass:"input_num"},[a("i",{on:{click:t.onReduce}},[t._v("-")]),a("span",[t._v(t._s(t.payNum))]),a("i",{on:{click:t.onAdd}},[t._v("+")])])]),a("div",{staticClass:"jiesuan border-top"},[a("div",{staticClass:"total"},[a("p",[t._v("\n          合计：\n          "),a("span",{staticClass:"price"},[t._v(t._s(t._f("formatMoney")(t.sum)))])]),a("p",[t._v("\n          共\n          "),a("span",{staticClass:"price"},[t._v(t._s(t.payNum))]),t._v(" 件商品\n        ")])]),a("span",{staticClass:"btn2",on:{click:function(i){t.onJoinCar(t.id)}}},[t._v("确定")])])]),a("mt-popup",{staticClass:"erweimaDiv",attrs:{"popup-transition":"popup-fade"},model:{value:t.popupVisible2,callback:function(i){t.popupVisible2=i},expression:"popupVisible2"}},[a("img",{attrs:{src:t.qrCodeImage,alt:t.name+"二维码"}})]),a("mt-popup",{staticClass:"share",attrs:{position:"bottom"},model:{value:t.shareVisiible,callback:function(i){t.shareVisiible=i},expression:"shareVisiible"}},[a("span",{staticClass:"icon-weixin2",on:{click:function(i){t.onShare(2)}}},[t._v("微信")]),a("span",{staticClass:"icon-pengyouquan",on:{click:function(i){t.onShare(1)}}},[t._v("朋友圈")])]),a("a",{staticClass:"backTop",on:{click:function(i){t.backTop("myWindow")}}},[t._v("TOP")])],1)},n=[],s=(a("28a5"),a("7f7f"),a("76a0")),o=a("3a78"),c=a("5f87"),r=a("18a0"),l=a.n(r),u=a("b893"),p={name:"ProductDetail",data:function(){return{popupVisible:!1,popupVisible2:!1,shareVisiible:!1,attachmentUrl:this.GLOBAL.attachmentUrl,orderUrl:this.GLOBAL.orderUrl,qrCodeImage:"",bigImage:"",smallImage:"",price:0,originalPrice:"",soldNum:0,sum:0,payNum:1,num:0,name:"",capacity:"",year:"",detail:"",id:this.$route.query.id,action:"",shoppingCartCountInfo:0,area:"",comment:"",collectSelectedStyle:!1,shareLink:!1,suggest:"",fragrance:"",palate:"",colour:"",grapeKind:"",pack:"",chateau:"",alcohol:"",classify:"",grade:"",productAttList:[]}},created:function(){this.findProudct(this.$route.query.id);var t=Object(c["d"])();t&&(this.shoppingCartCountMethod(),this.checkCollectMethod(this.$route.query.id))},mounted:function(){this.initConfig()},methods:{backTop:function(t){document.getElementById(t).scrollTo(0,0)},findProudct:function(t){var i=this,a={id:t};o["a"].findProduct(a,function(t){null!=t&&(i.price=t.price,i.bigImage=t.bigImage,i.price=t.price,i.originalPrice=t.originalPrice,i.soldNum=t.soldNum,i.num=t.num,i.name=t.name,i.capacity=t.capacity,i.year=t.year,i.id=t.id,i.smallImage=t.logo,i.area=t.area,i.comment=t.comment,i.sum=t.price,i.suggest=t.suggest,i.fragrance=t.fragrance,i.palate=t.palate,i.colour=t.colour,i.grapeKind=t.grapeKind,i.pack=t.pack,i.chateau=t.chateauId,i.alcohol=t.alcohol,i.grade=t.grade,i.classify=t.classify,i.initShare(),i.loadContent(t.detail),i.productAttList=t.productAttList)},function(t){})},loadContent:function(t){if(t){var i=this,a={id:t};o["a"].getProductContent(a,function(t){i.detail=t},function(t){})}},onPay:function(t){},onJoinCar:function(t){var i=this;if(this.payNum>this.num)Object(s["Toast"])("库存数据量不够");else{var a=this,e={productId:t,status:1,currentPrice:a.price,productQuantity:a.payNum};o["a"].addToShoppingCart(e,function(t){Object(s["Toast"])("添加购物车"+(t?"成功":"失败")),a.onHide(),i.shoppingCartCountMethod()},function(t){})}},checkCollectMethod:function(t){var i=this,a={prodId:t,prodType:1};o["a"].checkCollect(a,function(t){i.collectSelectedStyle=t})},onStore:function(t){var i=this,a=Object(c["d"])();if(a){var e={prodId:t,prodType:1};o["a"].addCollect(e,function(t){1==t?(i.collectSelectedStyle=!0,Object(s["Toast"])("收藏成功")):-1==t?(i.collectSelectedStyle=!1,Object(s["Toast"])("取消收藏成功")):Object(s["Toast"])("收藏失败")})}else Object(s["Toast"])("您尚未登陆葡悦汇，请先登录"),this.$router.push({path:"/Login"})},onAdd:function(){this.payNum>=this.num||(this.payNum++,this.sum=this.payNum*this.price)},onReduce:function(){this.payNum<=1||(this.payNum--,this.sum=this.payNum*this.price)},onShow:function(t){var i=Object(c["d"])();i?this.popupVisible=!0:(Object(s["Toast"])("您尚未登陆葡悦汇，请先登录"),this.$router.push({path:"/Login"}))},onHide:function(){this.popupVisible=!1},shoppingCartCountMethod:function(){var t=this,i={productId:"",type:""};o["a"].shoppingCartCount(i,function(i){t.shoppingCartCountInfo=i>99?99:i,window.localStorage.setItem("shoppingCartCount",t.shoppingCartCountInfo)},function(t){console.log("my---errorDatassss==="+JSON.stringify(t))})},showQrCode:function(){var t=this;this.popupVisible2=!0,o["a"].productQrCode(this.id,function(i){t.qrCodeImage=i},function(t){console.log("获取产品二维码信息发生异常:",JSON.stringify(t))})},initConfig:function(){Object(u["g"])()},onShare:function(t){1==t?this.shareTimeline():2==t&&this.shareAppMessage(),this.shareVisiible=!1},shareTimeline:function(){var t=this;l.a.onMenuShareTimeline({title:t.name,link:t.getShareUrl(),imgUrl:t.getShareImage(),trigger:function(){},success:function(){},cancel:function(){}})},shareAppMessage:function(){var t=this;l.a.onMenuShareAppMessage({title:t.name,desc:t.name,link:t.getShareUrl(),imgUrl:t.getShareImage(),success:function(){},cancel:function(){}})},getShareUrl:function(){return this.GLOBAL.publicUrl+"api/wx/menu/auth?service="+encodeURIComponent("#/ProductDetail?id="+this.id)},getShareImage:function(){return this.attachmentUrl+this.smallImage+".jpg"},initShare:function(){if(Object(u["g"])()){var t=window.location.href.split("#")[0],i={url:t},a=this;o["a"].wxjsConfig(i,function(t){t&&(l.a.config({debug:!1,appId:t.appId+"",timestamp:t.timestamp,nonceStr:t.nonceStr+"",signature:t.signature+"",jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","scanQRCode"]}),l.a.ready(function(){a.shareTimeline(),a.shareAppMessage()}))})}}}},d=p,h=(a("268a"),a("2877")),m=Object(h["a"])(d,e,n,!1,null,"93e83218",null);m.options.__file="ProductDetail.vue";i["default"]=m.exports}}]);