(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1d304be2"],{"0425":function(e,r,t){"use strict";t.r(r);var a=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"flexlayout"},[t("div",{staticClass:"topbar"},[t("span",{staticClass:"icon icon-fanhui",on:{click:function(r){e.$router.go(-1)}}}),t("div",[e._v("订单详情")]),t("router-link",{staticClass:"icon icon-home",attrs:{to:"/"}})],1),e.order?t("div",{staticClass:"dingdan"},[t("ul",{staticClass:"dingdanlist dingdanMessage"},[t("li",{staticClass:"border-bottom dingdanzhuangtai"},[t("strong",[e._v("订单信息")]),50==e.order.payOrderState?t("div",{staticStyle:{"text-align":"right"}},[t("span",{staticClass:"tipR"},[e._v("待收货")])]):e._e(),70==e.order.payOrderState?t("div",{staticStyle:{"text-align":"right"}},[t("span",{staticClass:"tipG"},[e._v("已收货")])]):e._e()]),t("li",[t("em",[e._v("订单编号：")]),t("span",[e._v(e._s(e.order.orderNo))])]),t("li",[t("em",[e._v("创建时间：")]),t("span",[e._v(e._s(e._f("formatDateTime")(e.order.createDate)))])]),t("li",[t("em",[e._v("订单状态：")]),t("span",[e._v(e._s(e.renderState(e.order.payOrderState)))])]),e.order.payOrderState>1?t("li",[t("em",[e._v("支付渠道：")]),t("span",[e._v(e._s("alipay"==e.order.channel?"支付宝":"wxpay"==e.order.channel?"微信":"余额"))])]):e._e(),e.order.payOrderState>1&&e.order.payDate?t("li",[t("em",[e._v("支付时间：")]),t("span",[e._v(e._s(e._f("formatDateTime")(e.order.payDate)))])]):e._e(),1==e.order.receiveType&&e.waybill?t("li",[t("em",[e._v("物流公司：")]),t("span",[e._v(e._s(e.waybill.expressInfoName))])]):e._e(),1==e.order.receiveType&&e.waybill?t("li",[t("em",[e._v("快递单号：")]),t("span",[e._v(e._s(e.waybill.expressNo))])]):e._e(),1==e.order.receiveType?t("li",[t("em",[e._v("收货人：")]),t("span",[e._v(e._s(JSON.parse(e.order.receiveInfo).receiver))])]):e._e(),1==e.order.receiveType?t("li",[t("em",[e._v("收货地址：")]),t("span",[e._v(e._s(JSON.parse(e.order.receiveInfo).fullAddress))])]):e._e(),2==e.order.receiveType?t("li",[t("em",[e._v("自提门店：")]),t("span",[e._v(e._s(JSON.parse(e.order.receiveInfo).address))])]):e._e(),2==e.order.receiveType?t("li",[t("em",[e._v("提货码：")]),t("span",[e.order.payOrderState>1?t("strong",{on:{click:function(r){e.showPickCode()}}},[e._v(e._s(JSON.parse(e.order.extra).pickCode))]):e._e()])]):e._e(),70==e.order.payOrderState?t("li",[t("em",[e._v("收货时间：")]),t("span",[e._v(e._s(e._f("formatDateTime")(e.order.updateDate)))])]):e._e(),70==e.order.payOrderState?t("li",[t("em",[e._v("意见建议：")]),t("p",[e._v(e._s(e.order.remark))])]):e._e()]),t("ul",{staticClass:"dingdanlist"},[e._m(0),e._l(e.order.payOrderDetails,function(r){return t("li",{key:r.id,staticClass:"border-top"},[t("router-link",{staticClass:"link",attrs:{to:"/ProductDetail?id="+r.objectId}},[t("div",{staticClass:"wrap_img"},[t("img",{attrs:{src:e.attachmentUrl+r.object.logo+".jpg",alt:r.object.name}}),e.getType(r)?t("span",{staticClass:"zhuanshu"},[e._v("专属商城")]):e._e()]),t("div",[t("h2",{staticClass:"productTitle"},[e._v(e._s(r.object.name))]),t("p",{staticClass:"price"},[e._v(e._s(e._f("formatMoney")(r.price)))]),t("p",[e._v("\n              规格："+e._s(r.object.year)+"年 "+e._s(r.object.capacity)+"\n              "),t("span",{staticStyle:{float:"right"}},[e._v("数量: "+e._s(r.quantity))])])])])],1)}),t("li",{staticClass:"border-top",staticStyle:{"padding-top":"0.3rem"}},[t("div",{staticClass:"graytext"},[e._v("\n          共\n          "),t("em",{staticClass:"price"},[e._v(e._s(e.order.payOrderDetails.length))]),e._v(" 件商品\n        ")]),t("div",[e._v(e._s(e._f("formatMoney")(e.totalAmount(e.order.payOrderDetails))))])]),t("li",[t("div",{staticClass:"graytext"},[e._v("快递费")]),t("div",[e._v(e._s(e._f("formatMoney")(e.order.serviceCharge)))])]),e.order.coupon1?t("li",[t("div",{staticClass:"graytext"},[e._v("无门槛优惠券")]),t("div",[e._v("- "+e._s(e._f("formatMoney")(e.order.coupon1.minusMoney)))])]):e._e(),e.order.coupon2?t("li",[t("div",{staticClass:"graytext"},[e._v("满减优惠券")]),t("div",[e._v("-"+e._s(e._f("formatMoney")(e.order.coupon2.minusMoney)))])]):e._e(),t("li",{staticStyle:{"padding-bottom":"0.3rem"}},[t("div",{staticClass:"graytext"},[e._v("合计")]),t("div",[t("em",{staticClass:"price"},[e._v(e._s(e._f("formatMoney")(e.order.amount)))])])]),t("li",{staticClass:"border-top"},[t("div",{staticClass:"graytext"}),t("div",{on:{click:function(r){e.deleteOrderInfo(e.order.id)}}},[e._v("删除订单")])])],2)]):e._e(),e.order&&1==e.order.receiveType&&50==e.order.payOrderState&&e.waybill?t("div",{staticClass:"bigBtn",on:{click:function(r){e.popupVisible=!0}}},[e._v("确认收货")]):e._e(),t("mt-popup",{staticClass:"shouhuo",attrs:{position:"bottom"},model:{value:e.popupVisible,callback:function(r){e.popupVisible=r},expression:"popupVisible"}},[t("h2",[e._v("您对收到的宝贝满意吗？请留言告诉我们您的想法。")]),e.order?t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.order.remark,expression:"order.remark"}],attrs:{cols:"30",rows:"10"},domProps:{value:e.order.remark},on:{input:function(r){r.target.composing||e.$set(e.order,"remark",r.target.value)}}}):e._e(),t("div",{staticClass:"bigBtn",on:{click:function(r){e.acceptOrder(e.waybill.id,e.order.id)}}},[e._v("确认收货")])])],1)},i=[function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("li",[t("strong",[e._v("商品信息")])])}],o=t("3a78"),n=t("76a0"),s={name:"DingdanShow",data:function(){return{popupVisible:!1,attachmentUrl:this.GLOBAL.attachmentUrl,orderId:this.$route.query.id,order:null,waybill:null}},created:function(){this.getPayOrderDetail()},methods:{getPayOrderDetail:function(){var e=this;o["a"].getPayOrderDetail(e.orderId,function(r){e.order=r,e.getWaybillInfo()},function(e){console.error("获取订单详细信息发生异常",JSON.stringify(e))})},getWaybillInfo:function(){var e=this;50!=e.order.payOrderState&&70!=e.order.payOrderState||o["a"].getWaybillInfo(e.order.extend,function(r){e.waybill=r},function(e){console.error("获取快递详细信息发生异常",JSON.stringify(e))})},deleteOrderInfo:function(e){var r=this;n["MessageBox"].confirm("您确定删除此订单吗?删除后将不可恢复.","提示").then(function(t,a){"confirm"===t&&o["a"].deleteOrderInfo(e,function(e){console.info("订单删除成功"),r.$router.go(-1)},function(e){console.error("删除订单发生异常:",JSON.stringify(e))})}).catch(function(e){})},acceptOrder:function(e,r){var t=this;t.popupVisible=!1,o["a"].acceptOrder({id:e,orderInfoId:r,comments:t.order.remark},function(e){t.$router.go(-1)},function(e){console.error("订单确认收货发生异常:",JSON.stringify(e))})},showPickCode:function(){Object(n["MessageBox"])("提货码","请提货时将此提货码展示给提货门店")}},computed:{totalAmount:function(){return function(e){for(var r=0,t=0;t<e.length;t++)r+=parseFloat(e[t].amount);return r}},getType:function(){return function(e){return!!e.extend&&"2"==JSON.parse(e.extend).type}},renderState:function(){return function(e){var r="未知";return 1==e?r="待支付":2==e?r="已支付":50==e?r="已发货":60==e?r="已门店自提":70==e?r="已收货":80==e?r="取消支付":90==e&&(r="交易关闭"),r}}}},d=s,c=(t("f8da"),t("2877")),l=Object(c["a"])(d,a,i,!1,null,"611eb89f",null);l.options.__file="DingdanShow.vue";r["default"]=l.exports},6871:function(e,r,t){},f8da:function(e,r,t){"use strict";var a=t("6871"),i=t.n(a);i.a}}]);