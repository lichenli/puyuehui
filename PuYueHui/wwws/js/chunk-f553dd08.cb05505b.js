(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f553dd08"],{"1dd8":function(e,t,s){"use strict";var a=s("b449"),r=s.n(a);r.a},b449:function(e,t,s){},c3d1:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"topbar"},[s("span",{staticClass:"icon icon-fanhui",on:{click:function(t){e.$router.go(-1)}}}),s("div",[e._v("确认订单")]),s("router-link",{staticClass:"icon icon-home",attrs:{to:"/"}})],1),s("ul",{staticClass:"dingdanlist",staticStyle:{"padding-top":".88rem"}},e._l(e.shoppings,function(t){return s("li",{key:t.id},[s("div",{staticClass:"wrap_img"},[s("img",{attrs:{src:e.attachmentUrl+t.product.logo,alt:t.product.name}}),2==t.type?s("span",{staticClass:"zhuanshu"},[e._v("专属商城")]):e._e()]),s("div",[s("h2",{staticClass:"productTitle"},[e._v(e._s(t.product.name))]),s("p",{staticClass:"price"},[e._v(e._s(e._f("formatMoney")(t.currentPrice)))]),s("p",[e._v("\n          规格："+e._s(t.product.year)+"年 "+e._s(t.product.capacity)+"\n          "),s("span",{staticStyle:{float:"right"}},[e._v("数量: "+e._s(t.productQuantity))])])])])})),s("ul",{staticClass:"list_common add"},[s("li",[s("div",{staticClass:"addinfo radioGroup"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.receiveType,expression:"receiveType"}],attrs:{type:"radio",id:"k1",name:"add",value:"1"},domProps:{checked:e._q(e.receiveType,"1")},on:{change:function(t){e.receiveType="1"}}}),s("label",{attrs:{for:"k1"}},[e._m(0),e.address?s("div",[e.address.receiver?s("p",{staticClass:"addressee"},[1==e.address.defaultAddr?s("span",{staticClass:"tag"},[e._v("默认")]):e._e(),s("strong",{staticClass:"name"},[e._v(e._s(e.address.receiver))]),s("span",{staticClass:"tel"},[e._v(e._s(e.address.mobile))])]):e._e(),e.address.fullAddress?s("p",{staticClass:"graytext"},[e._v(e._s(e.address.fullAddress))]):e._e()]):s("p",{staticClass:"addressee"},[s("strong",{staticClass:"graytext"},[e._v("请选择快递寄送收货地址")])])])]),s("router-link",{staticClass:"icon-fanhui",attrs:{to:{path:"/AddressSelect",query:{orderShoppingCartIds:this.$route.query.orderShoppingCartIds}}}})],1),s("li",[s("div",{staticClass:"addinfo radioGroup"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.receiveType,expression:"receiveType"}],attrs:{type:"radio",id:"k2",name:"add",value:"2"},domProps:{checked:e._q(e.receiveType,"2")},on:{change:function(t){e.receiveType="2"}}}),s("label",{attrs:{for:"k2"}},[e._m(1),e.store.storeName?s("p",{staticClass:"addressee"},[s("strong",{staticClass:"name"},[e._v(e._s(e.store.storeName))]),e._v("\n             \n            "),s("span",{staticClass:"tel"},[e._v(e._s(e.store.tel))])]):e._e(),e.store.address?s("p",{staticClass:"graytext"},[e._v(e._s(e.store.address))]):s("p",{staticClass:"addressee"},[s("strong",{staticClass:"graytext"},[e._v("请选择门店地址")])])])]),s("router-link",{staticClass:"icon-fanhui",attrs:{to:{path:"/AddressMendian",query:{orderShoppingCartIds:this.$route.query.orderShoppingCartIds}}}})],1)]),s("dl",{staticClass:"payment",staticStyle:{"margin-bottom":"1rem"}},[s("dt",[e._v("选择支付方式")]),e.balance>=e.totalPrice?s("dd",{staticClass:"icon-puyuepay",class:{cur:"balance"===e.channel},on:{click:function(t){e.channel="balance"}}},[e._v("\n      账户余额支付(当前余额:\n      "),s("span",{staticClass:"red"},[e._v(e._s(e._f("formatMoney")(e.balance)))]),e._v(")\n    ")]):s("dd",{staticClass:"icon-puyuepay"},[e._v("\n      您的余额不足(当前余额:\n      "),s("span",{staticClass:"red"},[e._v(e._s(e._f("formatMoney")(e.balance)))]),e._v(")\n    ")]),s("dd",{staticClass:"icon-weixin",class:{cur:"wxpay"===e.channel},on:{click:function(t){e.channel="wxpay"}}},[e._v("微信支付")]),e.isMicroMessengerMobile?e._e():s("dd",{staticClass:"icon-zhifubao",class:{cur:"alipay"===e.channel},on:{click:function(t){e.channel="alipay"}}},[e._v("支付宝支付")])]),s("div",{staticClass:"jiesuan border-top",staticStyle:{position:"fixed",bottom:"0"}},[s("div",{staticClass:"total"},[s("p",[e._v("\n        合计：\n        "),s("span",{staticClass:"price"},[e._v(e._s(e._f("formatMoney")(e.totalPrice)))])]),s("p",[e._v("\n        共\n        "),s("span",{staticClass:"price"},[e._v(e._s(e.shoppings.length))]),e._v(" 件商品\n      ")])]),s("button",{staticClass:"btn",on:{click:e.createOrderInfo}},[e._v("结算")])])])},r=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("p",[s("strong",[e._v("快递寄送收货地址:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("p",[s("strong",[e._v("门店自提:")])])}],n=(s("ac6a"),s("3a78")),i=s("76a0"),o={name:"Querendingdan",data:function(){var e=this.$util._isMicroMessengerMobile();return{attachmentUrl:this.GLOBAL.attachmentUrl,isMicroMessengerMobile:e,channel:e?"wxpay":"balance",receiveAddressId:null,address:this.$route.query.address?this.$route.query.address:{},store:this.$route.query.store?this.$route.query.store:{},receiveType:this.$route.query.store?2:1,shoppings:[],balance:0}},created:function(){this.getUserBalance(),this.showOrderShoppings(),this.$route.query.address||this.memberAddrSelectDefault()},methods:{showOrderShoppings:function(){var e=this,t={ids:this.$route.query.orderShoppingCartIds};t.ids&&t.ids.length>0&&n["a"].getOrderShoppings(t,function(t){e.shoppings=t.list,0==e.shoppings.length&&e.gotoShoppingcart()},function(e){console.error("获取选择的购物车编号列表的产品信息发生异常",JSON.stringify(e))})},memberAddrSelectDefault:function(){var e=this;e.store.id||n["a"].memberAddrSelectDefault(function(t){e.address=t},function(e){console.error("获取用户默认的收获地址发生异常",JSON.stringify(e))})},getUserBalance:function(){var e=this;n["a"].memberMoneySelect(function(t){e.balance=t?t.money:0},function(e){console.error("获取用户剩余资金信息发生异常",JSON.stringify(e))})},createOrderInfo:function(){var e=this,t=null;if(1==e.receiveType){if(!e.address||!e.address.id)return void Object(i["Toast"])("请选择您快递寄送的收货地址");t=e.address.id}else if(2==e.receiveType){if(!e.store||!e.store.id)return void Object(i["Toast"])("请选择您上门自提的门店地址");t=e.store.id}var s={orderShoppingCartIds:this.$route.query.orderShoppingCartIds,receiveType:this.receiveType,receiveAddressId:t,channel:this.channel};this.shoppings.length>0?n["a"].createOrderInfo(s,function(t){t?(console.log("新建的订单编号",t),"balance"===e.channel?e.balance>=e.totalPrice?n["a"].balancePay(t,function(t){Object(i["Toast"])("余额支付"+(t?"成功":"失败")),e.gotoShoppingcart()},function(e){console.error("余额支付异常"+JSON.stringify(e))}):Object(i["Toast"])("您的余额不足!"):"alipay"===e.channel?n["a"].alipay(t):n["a"].wxpay(t,function(e){e&&(window.location.href=e)},function(e){console.error("发起微信支付发生异常"+JSON.stringify(e))}),e.$router.push({name:"Shoppingcart",query:{tab:3}})):Object(i["Toast"])("订单创建失败")},function(e){console.error("添加订单异常"+JSON.stringify(e))}):Object(i["Toast"])("商品已被购买")},gotoShoppingcart:function(){var e=this;e.$router.push({name:"Shoppingcart",query:{tab:3}})}},computed:{totalPrice:function(){var e=0;return this.shoppings&&this.shoppings.forEach(function(t){e+=parseFloat(t.productQuantity*t.currentPrice)}),this.channel=this.balance>=e?"balance":this.isMicroMessengerMobile?"wxpay":"alipay",e}}},c=o,d=(s("1dd8"),s("2877")),l=Object(d["a"])(c,a,r,!1,null,"5cf2169a",null);l.options.__file="Querendingdan.vue";t["default"]=l.exports}}]);