(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5acdde49"],{"8f9f":function(e,a,t){e.exports=t.p+"img/coupons.7dd4b863.png"},aec2:function(e,a,t){"use strict";var i=t("e43e"),s=t.n(i);s.a},b8b8:function(e,a,t){"use strict";t.r(a);var i=function(){var e=this,a=e.$createElement,i=e._self._c||a;return i("div",{staticClass:"flexlayout"},[i("div",{staticClass:"topbar transparent"},[i("span",{staticClass:"icon icon-fanhui",on:{click:function(a){e.$router.go(-1)}}}),i("div",[e._v("注册")]),i("router-link",{staticClass:"icon icon-home",attrs:{to:"/"}})],1),i("div",{staticClass:"loginbg"},[i("div",{staticClass:"logo icon-puyuehui"}),i("ul",{staticClass:"login"},[i("li",[i("em",[e._v("手机号")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.paramsData.mobile,expression:"paramsData.mobile"}],attrs:{type:"text",placeholder:"请输入您的手机号",maxlength:"11"},domProps:{value:e.paramsData.mobile},on:{blur:this.$util.restore,input:function(a){a.target.composing||e.$set(e.paramsData,"mobile",a.target.value)}}})]),i("li",{staticClass:"yzm"},[i("em",[e._v("验证码")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.paramsData.verificationCode,expression:"paramsData.verificationCode"}],attrs:{type:"text",placeholder:"六位验证码",maxlength:"6"},domProps:{value:e.paramsData.verificationCode},on:{blur:this.$util.restore,input:function(a){a.target.composing||e.$set(e.paramsData,"verificationCode",a.target.value)}}}),i("button",{attrs:{type:"primary",disabled:e.isDisabled},on:{click:function(a){e.getVerificationCode()}}},[e._v(e._s(e.buttonName))])]),i("li",[i("em",[e._v("设置密码")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.paramsData.password,expression:"paramsData.password"}],attrs:{type:"password",maxlength:"20",placeholder:"设置密码"},domProps:{value:e.paramsData.password},on:{blur:this.$util.restore,input:function(a){a.target.composing||e.$set(e.paramsData,"password",a.target.value)}}})]),i("li",[i("em",[e._v("确认密码")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.passwordAgain,expression:"passwordAgain"}],attrs:{type:"password",maxlength:"20",placeholder:"重复输入密码"},domProps:{value:e.passwordAgain},on:{blur:this.$util.restore,input:function(a){a.target.composing||(e.passwordAgain=a.target.value)}}})]),i("li",[i("em",[e._v("推荐人手机")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.paramsData.refereeMobile,expression:"paramsData.refereeMobile"}],attrs:{type:"text",maxlength:"11",placeholder:"请填写推荐人手机号",readonly:e.refereeMobileReadonly},domProps:{value:e.paramsData.refereeMobile},on:{blur:this.$util.restore,input:function(a){a.target.composing||e.$set(e.paramsData,"refereeMobile",a.target.value)}}})])]),i("div",{staticClass:"xieyi"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.popupVisibleChecked,expression:"popupVisibleChecked"}],attrs:{type:"checkbox",id:"xieyi"},domProps:{checked:Array.isArray(e.popupVisibleChecked)?e._i(e.popupVisibleChecked,null)>-1:e.popupVisibleChecked},on:{change:function(a){var t=e.popupVisibleChecked,i=a.target,s=!!i.checked;if(Array.isArray(t)){var o=null,r=e._i(t,o);i.checked?r<0&&(e.popupVisibleChecked=t.concat([o])):r>-1&&(e.popupVisibleChecked=t.slice(0,r).concat(t.slice(r+1)))}else e.popupVisibleChecked=s}}}),i("label",{attrs:{for:"xieyi"}},[e._v("我已阅读并同意")]),i("span",{on:{click:function(a){e.popupVisible=!0}}},[e._v("《"+e._s(e.regAgreementsTitle)+"》")])]),i("div",{staticClass:"btn_login",on:{click:function(a){e.register()}}},[e._v("注册")]),i("p",{staticClass:"reg"},[i("a",{on:{click:function(a){e.onLogin()}}},[e._v("已有葡悦账号，直接登录")])])]),i("mt-popup",{staticClass:"xieyipage",attrs:{position:"right","popup-transition":"popup-fade"},model:{value:e.popupVisible,callback:function(a){e.popupVisible=a},expression:"popupVisible"}},[i("h2",[e._v(e._s(e.regAgreementsTitle))]),i("div",{staticClass:"content",domProps:{innerHTML:e._s(e.regAgreementsText)}}),i("div",{staticClass:"btnGroup"},[i("span",{staticClass:"btn2",on:{click:function(a){e.xieyipageCheck(0)}}},[e._v("不同意")]),i("span",{staticClass:"btn",on:{click:function(a){e.xieyipageCheck(1)}}},[e._v("同意")])])]),i("mt-popup",{staticClass:"popcoupons",attrs:{"popup-transition":"popup-fade",closeOnClickModal:e.clickfalse},model:{value:e.popupVisible2,callback:function(a){e.popupVisible2=a},expression:"popupVisible2"}},[i("span",{staticClass:"biaoti"},[e._v("优惠券已放到您的账户里")]),i("img",{attrs:{src:t("8f9f")}}),i("router-link",{staticClass:"bigBtn",attrs:{to:{path:"/Shop",query:{tab:2}}}},[e._v("去使用")])],1)],1)},s=[],o=(t("add6"),t("3a78")),r=(t("8c4f"),t("76a0")),n=t("b893"),p=t("5f87"),l={name:"Reg",data:function(){return{popupVisible:!1,popupVisible2:!1,popupVisibleChecked:!1,clickfalse:!1,paramsData:{mobile:"",verificationCode:"",loginName:"",password:"",userName:"",refereeMobile:""},passwordAgain:"",code:"",msg:"",buttonName:"获取验证码",isDisabled:!1,time:60,regAgreements:[],regAgreementsTitle:"葡悦注册协议",regAgreementsText:"",refereeMobileReadonly:!1}},mounted:function(){window.scrollTo(0,0),this.getData(),this.$router.history.current.query.refereeMobile&&(this.paramsData.refereeMobile=this.$router.history.current.query.refereeMobile,this.paramsData.refereeMobile&&Object(n["f"])(this.paramsData.refereeMobile)&&(this.refereeMobileReadonly=!0))},methods:{xieyipageCheck:function(e){this.popupVisible=!1,this.popupVisibleChecked=1==e},getVerificationCode:function(){var e=this;if(""!==this.paramsData.mobile)if(Object(n["f"])(this.paramsData.mobile)){var a={mobile:this.paramsData.mobile},t=this;o["a"].getVerificationCode(a,function(a){if(console.log("getVerificationCode result......"+JSON.stringify(a)),e.code=a.code,e.msg=a.msg,Object(r["Toast"])({message:e.msg,duration:2e3}),"0000"===a.code){e.isDisabled=!0,a.verificationCode&&(e.paramsData.verificationCode=a.verificationCode);var i=window.setInterval(function(){t.buttonName=t.time,--t.time,t.time<0&&(t.buttonName="重新发送",t.time=60,t.isDisabled=!1,window.clearInterval(i))},1e3)}else Object(r["Toast"])({message:"验证码发送失败，请重试",duration:2e3})},function(e){console.log("my---errorDatassss==="+JSON.stringify(e))})}else Object(r["Toast"])({message:"请填写正确的手机号",duration:2e3});else Object(r["Toast"])({message:"请填写您的手机号",duration:2e3})},register:function(){var e=this;console.log(e.popupVisibleChecked),e.popupVisibleChecked?""!==e.paramsData.mobile?Object(n["f"])(this.paramsData.mobile)?""!==e.paramsData.verificationCode?Object(n["b"])(e.paramsData.verificationCode)?""!==e.paramsData.password?e.paramsData.password.length<=3?Object(r["Toast"])({message:"登陆密码必须大于3位",duration:2e3}):""!==e.passwordAgain?e.paramsData.password===e.passwordAgain?!this.paramsData.refereeMobile||Object(n["f"])(this.paramsData.refereeMobile)?(Object(n["g"])()&&(e.paramsData.openid=Object(p["d"])()),o["a"].register(e.paramsData,function(a){e.code=a.code,e.msg=a.msg,Object(r["Toast"])({message:e.msg,duration:2e3}),"0000"===e.code&&(Object(p["h"])(a.token),e.popupVisible2=!0)},function(e){console.log("my---errorDatassss==="+JSON.stringify(e))})):Object(r["Toast"])({message:"请填写正确的推荐人手机",duration:2e3}):Object(r["Toast"])({message:"您两次输入的登陆密码登陆密码不一致，请检查",duration:2e3}):Object(r["Toast"])({message:"请再次填写您的登陆密码",duration:2e3}):Object(r["Toast"])({message:"请填写您的登陆密码",duration:2e3}):Object(r["Toast"])({message:"请填写6位数字短信验证码",duration:2e3}):Object(r["Toast"])({message:"请填写您的收到的短信验证码",duration:2e3}):Object(r["Toast"])({message:"请填写正确的手机号",duration:2e3}):Object(r["Toast"])({message:"请填写您的手机号",duration:2e3}):Object(r["Toast"])({message:"请同意葡悦注册协议",duration:2e3})},onLogin:function(){var e=this;e.$router.push({name:"Login"})},getData:function(){var e=this,a={model:{type:"regAgreement"}};o["a"].systextByType(a,function(a){a&&a.list&&(e.regAgreements=a.list,e.regAgreementsTitle=a.list[0].title,e.regAgreementsText=a.list[0].text)},function(e){console.log("my---errorDatassss==="+JSON.stringify(e))})}}},c=l,u=(t("aec2"),t("2877")),m=Object(u["a"])(c,i,s,!1,null,"3cffd1a9",null);m.options.__file="Reg.vue";a["default"]=m.exports},e43e:function(e,a,t){}}]);