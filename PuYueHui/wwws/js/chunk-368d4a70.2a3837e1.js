(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-368d4a70"],{"32aa":function(t,a,i){},"7f7f":function(t,a,i){var s=i("86cc").f,e=Function.prototype,n=/^\s*function ([^ (]*)/,o="name";o in e||i("9e1e")&&s(e,o,{configurable:!0,get:function(){try{return(""+this).match(n)[1]}catch(t){return""}}})},"95d1":function(t,a,i){"use strict";i.r(a);var s=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",[i("div",{staticClass:"flexlayout"},[i("div",{staticClass:"topbar"},[i("span",{staticClass:"icon icon-fanhui",on:{click:function(a){t.$router.go(-1)}}}),i("div",[t._v("商品详情")]),t.shareLink?i("a",{staticClass:"icon icon-share",on:{click:function(a){t.shareVisiible=!0}}}):i("span",{staticClass:"icon icon-erweima",on:{click:function(a){t.showQrCode()}}})]),i("div",{staticClass:"flexauto"},[i("div",{staticClass:"wrap_img noradius"},[t.bigImage?i("img",{attrs:{src:t.attachmentUrl+t.bigImage+".jpg",alt:""}}):t._e()]),i("div",{staticClass:"productInfo"},[i("span",{staticClass:"price"},[i("p",[t._v("\n            "+t._s(t._f("formatMoney")(t.price))+"\n            "),i("span",{staticClass:"tag"},[t._v("会员价")])]),i("em",[t._v("零售价："+t._s(t._f("formatMoney")(t.originalPrice)))])]),i("div",{staticClass:"sold"},[i("p",[t._v("已售 "+t._s(t.soldNum))]),i("p",[t._v("库存 "+t._s(t.num))])])]),i("div",{staticClass:"productPanel"},[i("h2",{staticClass:"productTitle"},[t._v("\n          "+t._s(t.name)+"\n        ")]),i("p",[t._v(t._s(t.comment))])]),i("ul",{staticClass:"guige"},[i("li",{staticClass:"border-bottom"},[i("em",{staticClass:"icon-chanpin"},[t._v("类型")]),i("span",{staticClass:"nowrap"},[t._v(t._s(t.classify))])]),i("li",{staticClass:"border-bottom"},[i("em",{staticClass:"icon-xuanjiu"},[t._v("容量")]),i("span",{staticClass:"nowrap"},[t._v(t._s(t.capacity))])]),i("li",{staticClass:"border-bottom"},[i("em",{staticClass:"icon-jiujingdu"},[t._v("酒精度")]),i("span",{staticClass:"nowrap"},[t._v(t._s(t.alcohol))])]),i("li",{staticClass:"border-bottom"},[i("em",{staticClass:"icon-mendian"},[t._v("等级")]),i("span",{staticClass:"nowrap"},[t._v(t._s(t.grade))])]),i("li",{staticClass:"long"},[i("em",[t._v("产区：")]),i("span",[t._v(t._s(t.area))])]),i("li",{staticClass:"long"},[i("em",[t._v("葡萄品种：")]),i("span",[t._v(t._s(t.grapeKind))])]),i("li",{staticClass:"long"},[i("em",[t._v("包装：")]),i("span",[t._v(t._s(t.pack))])]),t.fragrance?i("li",{staticClass:"long"},[i("em",[t._v("香气：")]),i("span",[t._v(t._s(t.fragrance))])]):t._e(),t.palate?i("li",{staticClass:"long"},[i("em",[t._v("口感：")]),i("span",[t._v(t._s(t.palate))])]):t._e(),t.suggest?i("li",{staticClass:"long"},[i("em",[t._v("配餐建议：")]),i("span",[t._v(t._s(t.suggest))])]):t._e()]),i("div",{staticClass:"productEditor",domProps:{innerHTML:t._s(t.detail)}})]),i("div",{staticClass:"goumai border-top"},[i("router-link",{staticClass:"icon-gouwuche border-right",attrs:{to:{path:"/Shoppingcart",query:{tab:3}}}},[t._v("\n        购物车\n        "),i("em",{staticClass:"badge"},[t._v(t._s(t.shoppingCartCountInfo))])]),i("span",{staticClass:"icon-star",class:{selected:t.collectSelectedStyle,"":!t.collectSelectedStyle},on:{click:function(a){t.onStore(t.id)}}},[t._v("收藏")]),i("span",{staticClass:"btn2 border-left",on:{click:function(a){t.onShow()}}},[t._v("加入购物车")])],1)]),i("mt-popup",{staticClass:"querenkuang",staticStyle:{width:"100%"},attrs:{position:"bottom","popup-transition":"popup-fade"},model:{value:t.popupVisible,callback:function(a){t.popupVisible=a},expression:"popupVisible"}},[i("div",{staticClass:"querenInfo"},[t.smallImage?i("img",{attrs:{src:t.attachmentUrl+t.smallImage+".jpg",alt:""}}):t._e(),i("div",[i("p",{staticClass:"price"},[t._v(t._s(t._f("formatMoney")(t.price)))]),i("p",[t._v("库存: "+t._s(t.num))])])]),i("ul",{staticClass:"guige border-top"},[i("li",[i("em",[t._v("规格：")]),i("span",{staticClass:"border cur"},[t._v(t._s(t.capacity))])]),i("li",[i("em",[t._v("年份：")]),i("span",{staticClass:"border disable"},[t._v(t._s(t.year)+"年")])])]),i("div",{staticClass:"border-top",staticStyle:{overflow:"hidden",padding:".2rem"}},[i("span",{staticClass:"input_num"},[i("i",{on:{click:t.onReduce}},[t._v("-")]),i("span",[t._v(t._s(t.payNum))]),i("i",{on:{click:t.onAdd}},[t._v("+")])])]),i("div",{staticClass:"jiesuan border-top"},[i("div",{staticClass:"total"},[i("p",[t._v("\n          合计：\n          "),i("span",{staticClass:"price"},[t._v(t._s(t._f("formatMoney")(t.sum)))])]),i("p",[t._v("\n          共\n          "),i("span",{staticClass:"price"},[t._v(t._s(t.payNum))]),t._v(" 件商品\n        ")])]),i("span",{staticClass:"btn2",on:{click:function(a){t.onJoinCar(t.id)}}},[t._v("确定")])])]),i("mt-popup",{staticClass:"erweimaDiv",attrs:{"popup-transition":"popup-fade"},model:{value:t.popupVisible2,callback:function(a){t.popupVisible2=a},expression:"popupVisible2"}},[i("img",{attrs:{src:t.qrCodeImage,alt:t.name+"二维码"}})]),i("mt-popup",{staticClass:"share",attrs:{position:"bottom"},model:{value:t.shareVisiible,callback:function(a){t.shareVisiible=a},expression:"shareVisiible"}},[i("span",{staticClass:"icon-weixin2",on:{click:function(a){t.onShare(2)}}},[t._v("微信")]),i("span",{staticClass:"icon-pengyouquan",on:{click:function(a){t.onShare(1)}}},[t._v("朋友圈")])])],1)},e=[],n=(i("28a5"),i("7f7f"),i("76a0")),o=i("3a78"),c=i("5f87"),r=i("18a0"),l=i.n(r),p=i("b893"),u={name:"ProductDetail",data:function(){return{popupVisible:!1,popupVisible2:!1,shareVisiible:!1,attachmentUrl:this.GLOBAL.attachmentUrl,orderUrl:this.GLOBAL.orderUrl,qrCodeImage:"",bigImage:"",smallImage:"",price:0,originalPrice:"",soldNum:0,sum:0,payNum:1,num:0,name:"",capacity:"",year:"",detail:"",id:this.$route.query.id,action:"",shoppingCartCountInfo:0,area:"",comment:"",collectSelectedStyle:!1,shareLink:!1,suggest:"",fragrance:"",palate:"",colour:"",grapeKind:"",pack:"",chateau:"",alcohol:"",classify:"",grade:""}},created:function(){this.findProudct(this.$route.query.id);var t=Object(c["d"])();t&&(this.shoppingCartCountMethod(),this.checkCollectMethod(this.$route.query.id))},mounted:function(){this.initConfig()},methods:{findProudct:function(t){var a=this,i={id:t};o["a"].findProduct(i,function(t){null!=t&&(a.price=t.price,a.bigImage=t.bigImage,a.price=t.price,a.originalPrice=t.originalPrice,a.soldNum=t.soldNum,a.num=t.num,a.name=t.name,a.capacity=t.capacity,a.year=t.year,a.id=t.id,a.smallImage=t.logo,a.area=t.area,a.comment=t.comment,a.sum=t.price,a.suggest=t.suggest,a.fragrance=t.fragrance,a.palate=t.palate,a.colour=t.colour,a.grapeKind=t.grapeKind,a.pack=t.pack,a.chateau=t.chateauId,a.alcohol=t.alcohol,a.grade=t.grade,a.classify=t.classify,a.initShare(),a.loadContent(t.detail))},function(t){})},loadContent:function(t){if(t){var a=this,i={id:t};o["a"].getProductContent(i,function(t){a.detail=t},function(t){})}},onPay:function(t){},onJoinCar:function(t){var a=this;if(this.payNum>this.num)Object(n["Toast"])("库存数据量不够");else{var i=this,s={productId:t,status:1,currentPrice:i.price,productQuantity:i.payNum};o["a"].addToShoppingCart(s,function(t){Object(n["Toast"])("添加购物车"+(t?"成功":"失败")),i.onHide(),a.shoppingCartCountMethod()},function(t){})}},checkCollectMethod:function(t){var a=this,i={prodId:t,prodType:1};o["a"].checkCollect(i,function(t){a.collectSelectedStyle=t})},onStore:function(t){var a=this,i=Object(c["d"])();if(i){var s={prodId:t,prodType:1};o["a"].addCollect(s,function(t){1==t?(a.collectSelectedStyle=!0,Object(n["Toast"])("收藏成功")):-1==t?(a.collectSelectedStyle=!1,Object(n["Toast"])("取消收藏成功")):Object(n["Toast"])("收藏失败")})}else Object(n["Toast"])("您尚未登陆葡悦汇，请先登录"),this.$router.push({path:"/Login"})},onAdd:function(){this.payNum>=this.num||(this.payNum++,this.sum=this.payNum*this.price)},onReduce:function(){this.payNum<=1||(this.payNum--,this.sum=this.payNum*this.price)},onShow:function(t){var a=Object(c["d"])();a?this.popupVisible=!0:(Object(n["Toast"])("您尚未登陆葡悦汇，请先登录"),this.$router.push({path:"/Login"}))},onHide:function(){this.popupVisible=!1},shoppingCartCountMethod:function(){var t=this,a={productId:"",type:""};o["a"].shoppingCartCount(a,function(a){t.shoppingCartCountInfo=a},function(t){console.log("my---errorDatassss==="+JSON.stringify(t))})},showQrCode:function(){var t=this;this.popupVisible2=!0,o["a"].productQrCode(this.id,function(a){t.qrCodeImage=a},function(t){console.log("获取产品二维码信息发生异常:",JSON.stringify(t))})},initConfig:function(){Object(p["g"])()},onShare:function(t){1==t?this.shareTimeline():2==t&&this.shareAppMessage(),this.shareVisiible=!1},shareTimeline:function(){var t=this;l.a.onMenuShareTimeline({title:t.name,link:t.getShareUrl(),imgUrl:t.getShareImage(),trigger:function(){},success:function(){},cancel:function(){}})},shareAppMessage:function(){var t=this;l.a.onMenuShareAppMessage({title:t.name,desc:t.name,link:t.getShareUrl(),imgUrl:t.getShareImage(),success:function(){},cancel:function(){}})},getShareUrl:function(){return this.GLOBAL.publicUrl+"api/wx/menu/auth?service="+encodeURIComponent("#/ProductDetail?id="+this.id)},getShareImage:function(){return this.attachmentUrl+this.smallImage+".jpg"},initShare:function(){if(Object(p["g"])()){var t=window.location.href.split("#")[0],a={url:t},i=this;o["a"].wxjsConfig(a,function(t){t&&(l.a.config({debug:!1,appId:t.appId+"",timestamp:t.timestamp,nonceStr:t.nonceStr+"",signature:t.signature+"",jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","scanQRCode"]}),l.a.ready(function(){i.shareTimeline(),i.shareAppMessage()}))})}}}},d=u,h=(i("f369"),i("2877")),m=Object(h["a"])(d,s,e,!1,null,"271d10d8",null);m.options.__file="ProductDetail.vue";a["default"]=m.exports},f369:function(t,a,i){"use strict";var s=i("32aa"),e=i.n(s);e.a}}]);