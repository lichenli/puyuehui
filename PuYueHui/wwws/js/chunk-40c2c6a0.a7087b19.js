(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-40c2c6a0"],{"3da1":function(t,i,e){},"7f7f":function(t,i,e){var a=e("86cc").f,s=Function.prototype,n=/^\s*function ([^ (]*)/,o="name";o in s||e("9e1e")&&a(s,o,{configurable:!0,get:function(){try{return(""+this).match(n)[1]}catch(t){return""}}})},"95d1":function(t,i,e){"use strict";e.r(i);var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("div",{staticClass:"flexlayout"},[e("div",{staticClass:"topbar"},[e("span",{staticClass:"icon icon-fanhui",on:{click:function(i){t.$router.go(-1)}}}),e("div",[t._v("商品详情")]),t.shareLink?e("a",{staticClass:"icon icon-share",on:{click:function(i){t.shareVisiible=!0}}}):e("span",{staticClass:"icon icon-erweima",on:{click:function(i){t.showQrCode()}}})]),e("div",{staticClass:"flexauto"},[e("div",{staticClass:"wrap_img noradius"},[t.bigImage?e("img",{attrs:{src:t.attachmentUrl+t.bigImage+".jpg",alt:""}}):t._e()]),e("div",{staticClass:"productInfo"},[e("span",{staticClass:"price"},[e("p",[t._v("\n            "+t._s(t._f("formatMoney")(t.price))+"\n            "),e("span",{staticClass:"tag"},[t._v("会员价")])]),e("em",[t._v("零售价："+t._s(t._f("formatMoney")(t.originalPrice)))])]),e("div",{staticClass:"sold"},[e("p",[t._v("已售 "+t._s(t.soldNum))]),e("p",[t._v("库存 "+t._s(t.num))])])]),e("div",{staticClass:"productPanel"},[e("h2",{staticClass:"productTitle"},[t._v("\n          "+t._s(t.name)+"\n        ")]),e("p",[t._v(t._s(t.comment))])]),e("ul",{staticClass:"guige"},[t._m(0),e("li",{staticClass:"border-bottom"},[e("em",{staticClass:"icon-xuanjiu"},[t._v("容量")]),e("span",[t._v(t._s(t.capacity))])]),t._m(1),t._m(2),e("li",{staticClass:"long"},[e("em",[t._v("产区：")]),e("span",[t._v(t._s(t.area))])]),e("li",{staticClass:"long"},[e("em",[t._v("酒庄：")]),e("span",[t._v(t._s(t.area))])]),t._m(3),t._m(4),t._m(5),t._m(6),t._m(7),t._m(8)]),e("div",{staticClass:"productEditor",domProps:{innerHTML:t._s(t.detail)}})]),e("div",{staticClass:"goumai border-top"},[e("router-link",{staticClass:"icon-gouwuche border-right",attrs:{to:{path:"/Shoppingcart",query:{tab:3}}}},[t._v("\n        购物车\n        "),e("em",{staticClass:"badge"},[t._v(t._s(t.shoppingCartCountInfo))])]),e("span",{staticClass:"icon-star",class:{selected:t.collectSelectedStyle,"":!t.collectSelectedStyle},on:{click:function(i){t.onStore(t.id)}}},[t._v("收藏")]),e("span",{staticClass:"btn2 border-left",on:{click:function(i){t.onShow()}}},[t._v("加入购物车")])],1)]),e("mt-popup",{staticClass:"querenkuang",staticStyle:{width:"100%"},attrs:{position:"bottom","popup-transition":"popup-fade"},model:{value:t.popupVisible,callback:function(i){t.popupVisible=i},expression:"popupVisible"}},[e("div",{staticClass:"querenInfo"},[t.smallImage?e("img",{attrs:{src:t.attachmentUrl+t.smallImage+".jpg",alt:""}}):t._e(),e("div",[e("p",{staticClass:"price"},[t._v(t._s(t._f("formatMoney")(t.price)))]),e("p",[t._v("库存: "+t._s(t.num))])])]),e("ul",{staticClass:"guige border-top"},[e("li",[e("em",[t._v("规格：")]),e("span",{staticClass:"border cur"},[t._v(t._s(t.capacity))])]),e("li",[e("em",[t._v("年份：")]),e("span",{staticClass:"border disable"},[t._v(t._s(t.year)+"年")])])]),e("div",{staticClass:"border-top",staticStyle:{overflow:"hidden",padding:".2rem"}},[e("span",{staticClass:"input_num"},[e("i",{on:{click:t.onAdd}},[t._v("+")]),e("span",[t._v(t._s(t.payNum))]),e("i",{on:{click:t.onReduce}},[t._v("-")])])]),e("div",{staticClass:"jiesuan border-top"},[e("div",{staticClass:"total"},[e("p",[t._v("\n          合计：\n          "),e("span",{staticClass:"price"},[t._v(t._s(t._f("formatMoney")(t.sum)))])]),e("p",[t._v("\n          共\n          "),e("span",{staticClass:"price"},[t._v(t._s(t.payNum))]),t._v(" 件商品\n        ")])]),e("span",{staticClass:"btn2",on:{click:function(i){t.onJoinCar(t.id)}}},[t._v("确定")])])]),e("mt-popup",{staticClass:"erweimaDiv",attrs:{"popup-transition":"popup-fade"},model:{value:t.popupVisible2,callback:function(i){t.popupVisible2=i},expression:"popupVisible2"}},[e("img",{attrs:{src:t.qrCodeImage,alt:t.name+"二维码"}})]),e("mt-popup",{staticClass:"share",attrs:{position:"bottom"},model:{value:t.shareVisiible,callback:function(i){t.shareVisiible=i},expression:"shareVisiible"}},[e("span",{staticClass:"icon-weixin2",on:{click:function(i){t.onShare(2)}}},[t._v("微信")]),e("span",{staticClass:"icon-pengyouquan",on:{click:function(i){t.onShare(1)}}},[t._v("朋友圈")])])],1)},s=[function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("li",{staticClass:"border-bottom"},[e("em",{staticClass:"icon-chanpin"},[t._v("类型")]),e("span",[t._v("红葡萄酒")])])},function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("li",{staticClass:"border-bottom"},[e("em",{staticClass:"icon-jiujingdu"},[t._v("酒精度")]),e("span",[t._v("35°")])])},function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("li",{staticClass:"border-bottom"},[e("em",{staticClass:"icon-mendian"},[t._v("等级")]),e("span",[t._v("AOP")])])},function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("li",{staticClass:"long"},[e("em",[t._v("葡萄品种：")]),e("span",[t._v("35%赤霞珠；65%西拉子")])])},function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("li",{staticClass:"long"},[e("em",[t._v("包装：")]),e("span",[t._v("1支")])])},function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("li",{staticClass:"long"},[e("em",[t._v("色泽：")]),e("span",[t._v("xxxxx")])])},function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("li",{staticClass:"long"},[e("em",[t._v("香气：")]),e("span",[t._v("xxxxx")])])},function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("li",{staticClass:"long"},[e("em",[t._v("口感：")]),e("span",[t._v("xxxxx")])])},function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("li",{staticClass:"long"},[e("em",[t._v("配餐建议：")]),e("span",[t._v("xxxxx")])])}],n=(e("28a5"),e("7f7f"),e("76a0")),o=e("3a78"),c=e("5f87"),r=e("18a0"),l=e.n(r),u=e("b893"),p={name:"ProductDetail",data:function(){return{popupVisible:!1,popupVisible2:!1,shareVisiible:!1,attachmentUrl:this.GLOBAL.attachmentUrl,orderUrl:this.GLOBAL.orderUrl,qrCodeImage:"",bigImage:"",smallImage:"",price:0,originalPrice:"",soldNum:0,sum:0,payNum:1,num:0,name:"",capacity:"",year:"",detail:"",id:this.$route.query.id,action:"",shoppingCartCountInfo:0,area:"",comment:"",collectSelectedStyle:!1,shareLink:!1}},created:function(){this.findProudct(this.$route.query.id);var t=Object(c["b"])();t&&(this.shoppingCartCountMethod(),this.checkCollectMethod(this.$route.query.id))},mounted:function(){this.initConfig()},methods:{findProudct:function(t){var i=this,e={id:t};o["a"].findProduct(e,function(t){null!=t&&(i.price=t.price,i.bigImage=t.bigImage,i.price=t.price,i.originalPrice=t.originalPrice,i.soldNum=t.soldNum,i.num=t.num,i.name=t.name,i.capacity=t.capacity,i.year=t.year,i.id=t.id,i.smallImage=t.logo,i.area=t.area,i.comment=t.comment,i.sum=t.price,i.initShare(),i.loadContent(t.detail))},function(t){})},loadContent:function(t){if(t){var i=this,e={id:t};o["a"].getProductContent(e,function(t){i.detail=t},function(t){})}},onPay:function(t){},onJoinCar:function(t){var i=this;if(this.payNum>this.num)Object(n["Toast"])("库存数据量不够");else{var e=this,a={productId:t,status:1,currentPrice:e.price,productQuantity:e.payNum};o["a"].addToShoppingCart(a,function(t){Object(n["Toast"])("添加购物车"+(t?"成功":"失败")),e.onHide(),i.shoppingCartCountMethod()},function(t){})}},checkCollectMethod:function(t){var i=this,e={prodId:t,prodType:1};o["a"].checkCollect(e,function(t){i.collectSelectedStyle=t})},onStore:function(t){var i=this,e=Object(c["b"])();if(e){var a={prodId:t,prodType:1};o["a"].addCollect(a,function(t){1==t?(i.collectSelectedStyle=!0,Object(n["Toast"])("收藏成功")):-1==t?(i.collectSelectedStyle=!1,Object(n["Toast"])("取消收藏成功")):Object(n["Toast"])("收藏失败")})}else Object(n["Toast"])("您尚未登陆葡悦汇，请先登录"),this.$router.push({path:"/Login"})},onAdd:function(){this.payNum>=this.num||(this.payNum++,this.sum=this.payNum*this.price)},onReduce:function(){this.payNum<=1||(this.payNum--,this.sum=this.payNum*this.price)},onShow:function(t){var i=Object(c["b"])();i?this.popupVisible=!0:(Object(n["Toast"])("您尚未登陆葡悦汇，请先登录"),this.$router.push({path:"/Login"}))},onHide:function(){this.popupVisible=!1},shoppingCartCountMethod:function(){var t=this,i={productId:"",type:""};o["a"].shoppingCartCount(i,function(i){t.shoppingCartCountInfo=i},function(t){console.log("my---errorDatassss==="+JSON.stringify(t))})},showQrCode:function(){var t=this;this.popupVisible2=!0,o["a"].productQrCode(this.id,function(i){t.qrCodeImage=i},function(t){console.log("获取产品二维码信息发生异常:",JSON.stringify(t))})},initConfig:function(){Object(u["g"])()||(this.shareLink=!0)},onShare:function(t){1==t?this.shareTimeline():2==t&&this.shareAppMessage(),this.shareVisiible=!1},shareTimeline:function(){var t=this;l.a.onMenuShareTimeline({title:t.name,link:t.getShareUrl(),imgUrl:t.getShareImage(),trigger:function(){},success:function(){},cancel:function(){}})},shareAppMessage:function(){var t=this;l.a.onMenuShareAppMessage({title:t.name,desc:t.name,link:t.getShareUrl(),imgUrl:t.getShareImage(),success:function(){},cancel:function(){}})},getShareUrl:function(){return this.GLOBAL.baseUrl+"#/ProductDetail?id="+this.id},getShareImage:function(){return this.attachmentUrl+this.smallImage+".jpg"},initShare:function(){var t=window.location.href.split("#")[0],i={url:t},e=this;o["a"].wxjsConfig(i,function(t){t&&(l.a.config({debug:!1,appId:t.appId+"",timestamp:t.timestamp,nonceStr:t.nonceStr+"",signature:t.signature+"",jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","scanQRCode"]}),l.a.ready(function(){e.shareTimeline(),e.shareAppMessage()}))})}}},m=p,d=(e("f8b2"),e("2877")),h=Object(d["a"])(m,a,s,!1,null,"12d478ca",null);h.options.__file="ProductDetail.vue";i["default"]=h.exports},f8b2:function(t,i,e){"use strict";var a=e("3da1"),s=e.n(a);s.a}}]);